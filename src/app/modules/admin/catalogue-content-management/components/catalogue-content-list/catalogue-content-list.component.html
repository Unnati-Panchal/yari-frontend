<div class="main-body">
  <div>
    <h2 class="head">Catalogue Content Management</h2>
  </div>

  <div class="search col-md-12">
    <div class="col-md-6 search--flex">
      <mat-form-field floatLabel="never" appearance="none" class="form-field">
        <input matInput placeholder="Search By Catalogue ID Name or SKU ID" [(ngModel)]="filter">
      </mat-form-field>
      <button mat-button type="button" class="search-button" (click)="applyFilter(filter)">
        <mat-icon>search</mat-icon>
      </button>
    </div>

    <div class="col-md-6">
      <button mat-button type="button" [disabled]="selectedRows.data.length === 0" class="edit-button" (click)="nagivateToEdit()">
        <mat-icon class="edit-button__icon">edit</mat-icon> Edit Selected Catalogue
      </button>
    </div>
  </div>
  <div *ngIf="!loading && dataSource?.data?.length" class="centered table-box">
  <div class="col-md-12">
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="selected_product_sku_id" sticky>
        <th mat-header-cell *matHeaderCellDef>Select catalogue</th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox class="example-margin" (change)="changed($event, element.id)">
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="catalogue_name">
        <th mat-header-cell *matHeaderCellDef>Catalogue Name</th>
        <td mat-cell *matCellDef="let element">{{element.catalogue_name}}</td>
      </ng-container>
      <ng-container matColumnDef="supplier_business_name">
        <th mat-header-cell *matHeaderCellDef>Supplier Business Name</th>
        <td mat-cell *matCellDef="let element">{{element.supplier_business_name}}</td>
      </ng-container>
      <ng-container matColumnDef="category_name">
        <th mat-header-cell *matHeaderCellDef>Product Category</th>
        <td mat-cell *matCellDef="let element">{{element.category_name}}</td>
      </ng-container>
      <ng-container matColumnDef="product_count">
        <th mat-header-cell *matHeaderCellDef>Product Count</th>
        <td mat-cell *matCellDef="let element">{{element.product_count}}</td>
      </ng-container>
      <ng-container matColumnDef="catalogue_status">
        <th mat-header-cell *matHeaderCellDef>Catalogue status</th>
        <td mat-cell *matCellDef="let element">{{element.catalogue_status}}</td>
      </ng-container>
      
      <ng-container matColumnDef="catalogue_uploaded_by">
        <th mat-header-cell *matHeaderCellDef>Catalogue uploaded by</th>
        <td mat-cell *matCellDef="let element">{{element.catalogue_uploaded_by}}</td>
      </ng-container>
      
      <ng-container matColumnDef="catalogue_uploaded_date">
        <th mat-header-cell *matHeaderCellDef>Catalogue uploaded date</th>
        <td mat-cell *matCellDef="let element">{{element.catalogue_uploaded_date}}</td>
      </ng-container>

      <ng-container matColumnDef="action_by">
        <th mat-header-cell *matHeaderCellDef>Catalog Action By</th>
        <td mat-cell *matCellDef="let element">{{element.action_by}}</td>
      </ng-container>


      <ng-container matColumnDef="action_date">
        <th mat-header-cell *matHeaderCellDef>Catalog Action Date</th>
        <td mat-cell *matCellDef="let element">{{element.action_date}}</td>
      </ng-container>

      <ng-container matColumnDef="content_updated_by">
        <th mat-header-cell *matHeaderCellDef>Catalogue Content Updated Date</th>
        <td mat-cell *matCellDef="let element">{{element.content_updated_by}}</td>
      </ng-container>

      <ng-container matColumnDef="content_updated_date">
        <th mat-header-cell *matHeaderCellDef>Catalogue Content Updated Date</th>
        <td mat-cell *matCellDef="let element">{{element.content_updated_date}}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr> 
    </table>
  </div>

  <div class="paginator">
    <mat-paginator *ngIf="!loading && dataSource?.data?.length"
                   [pageSizeOptions]="paginationSizes"
                   [pageSize]="defaultPageSize"
                   showFirstLastButtons>
    </mat-paginator>
  </div>
  </div>
  <div *ngIf="loading" class="centered">
    <mat-spinner color="warn" [diameter]="50"></mat-spinner>
  </div>
  <div *ngIf="!loading && !dataSource?.data?.length" class="centered">
    <p>Oops, nothing found.</p>
  </div>
</div>


